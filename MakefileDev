deps start-deps:
		@docker-compose --project-name vmod-curl up -d
		@echo "Dependencies started successfully."

deps-build:
		@docker-compose --project-name vmod-curl up --build -d

stop-deps:
		@docker-compose --project-name vmod-curl down

shell:
		@docker-compose --project-name vmod-curl run varnish /bin/bash

put:
		@docker container create --name dummy -v vmod-curl_app:/root alpine
		@docker cp `pwd`/. dummy:/root
		@docker rm dummy

first-compile:
		@docker-compose --project-name vmod-curl run varnish /bin/bash -c "cd /app && ./autogen.sh && ./configure && make"

compile:
		@docker-compose --project-name vmod-curl run varnish /bin/bash -c "cd /app && make"

test: compile put unit

unit:
		@docker-compose --project-name vmod-curl run varnish /bin/bash -c "cd /app && varnishtest -Dvmod_topbuild=/app src/tests/*.vtc"
